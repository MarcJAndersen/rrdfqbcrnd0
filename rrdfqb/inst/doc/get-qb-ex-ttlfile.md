---
title: "Get RDF data cube example file from RDF data cube specifications"
author: "mja@statgroup.dk"
date: "2015-12-27"
---

## Setup 

```r
devtools::load_all(pkg="../..")
```

```
## Loading rrdfqb
## Loading required package: xlsx
## Loading required package: rJava
## Loading required package: methods
## Loading required package: xlsxjars
## Loading required package: RCurl
## Loading required package: bitops
## 
## Attaching package: 'RCurl'
## 
## The following object is masked from 'package:rJava':
## 
##     clone
## 
## Loading required package: rrdf
## Loading required package: rrdflibs
```

# R-code


```r
library(RCurl)
library(devtools)
qbURL<-"https://raw.githubusercontent.com/UKGovLD/publishing-statistical-data/master/specs/src/main/example/example.ttl"
if (! url.exists(qbURL) ) {
  stop(paste0("Can not access URL ",qbURL))
}
examplettl <- getURL(qbURL)
savefile <- file.path(system.file("extdata/sample-rdf", package="rrdfqb"), "example.ttl" )
writeLines( examplettl, savefile)
cat("written to ", normalizePath(savefile) )
```

```
## written to  /home/ma/projects/R-projects/rrdfqbcrnd0/rrdfqb/inst/extdata/sample-rdf/example.ttl
```

# Show one observations from the store


```r
exfile <- file.path(system.file("extdata/sample-rdf", "example.ttl", package="rrdfqb") )
store <- new.rdf(ontology=FALSE)
load.rdf( exfile, format="TURTLE", store)
```

```
## [1] "Java-Object{<ModelCom   {eg:organization @rdfs:label \"Example org\"@en; eg:organization @rdf:type foaf:Agent; eg:organization @rdf:type org:Organization; eg:o31 @eg:lifeExpectancy \"77.1\"^^http://www.w3.org/2001/XMLSchema#decimal; eg:o31 @eg:refArea ex-geo:newport_00pr; eg:o31 @qb:dataSet eg:dataset-le3; eg:o31 @rdf:type qb:Observation; 256caf10fb5fb960688d18c53fbcb8de @qb:order \"1\"^^http://www.w3.org/2001/XMLSchema#integer; 256caf10fb5fb960688d18c53fbcb8de @qb:dimension eg:refArea; eg:o44 @eg:lifeExpectancy \"79.4\"^^http://www.w3.org/2001/XMLSchema#decimal; eg:o44 @eg:refArea ex-geo:merthyr_tdfil_00ph; eg:o44 @qb:dataSet eg:dataset-le3; eg:o44 @rdf:type qb:Observation; d961e60be1970cc7ddca42992e970eee @qb:componentAttachment qb:DataSet; d961e60be1970cc7ddca42992e970eee @qb:componentRequired \"true\"^^http://www.w3.org/2001/XMLSchema#boolean; d961e60be1970cc7ddca42992e970eee @qb:attribute sdmx-attribute:unitMeasure; eg:slice3 @qb:observation eg:o34...} |  [http://example.org/ns#organization, http://www.w3.org/2000/01/rdf-schema#label, \"Example org\"@en] [http://example.org/ns#organization, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://xmlns.com/foaf/0.1/Agent] [http://example.org/ns#organization, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://www.w3.org/ns/org#Organization] [http://example.org/ns#o31, http://example.org/ns#lifeExpectancy, \"77.1\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o31, http://example.org/ns#refArea, http://example.org/geo#newport_00pr] [http://example.org/ns#o31, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o31, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [256caf10fb5fb960688d18c53fbcb8de, http://purl.org/linked-data/cube#order, \"1\"^^http://www.w3.org/2001/XMLSchema#integer] [256caf10fb5fb960688d18c53fbcb8de, http://purl.org/linked-data/cube#dimension, http://example.org/ns#refArea] [http://example.org/ns#o44, http://example.org/ns#lifeExpectancy, \"79.4\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o44, http://example.org/ns#refArea, http://example.org/geo#merthyr_tdfil_00ph] [http://example.org/ns#o44, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o44, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [d961e60be1970cc7ddca42992e970eee, http://purl.org/linked-data/cube#componentAttachment, http://purl.org/linked-data/cube#DataSet] [d961e60be1970cc7ddca42992e970eee, http://purl.org/linked-data/cube#componentRequired, \"true\"^^http://www.w3.org/2001/XMLSchema#boolean] [d961e60be1970cc7ddca42992e970eee, http://purl.org/linked-data/cube#attribute, http://purl.org/linked-data/sdmx/2009/attribute#unitMeasure] [http://example.org/ns#slice3, http://purl.org/linked-data/cube#observation, http://example.org/ns#o34] [http://example.org/ns#slice3, http://purl.org/linked-data/cube#observation, http://example.org/ns#o33] [http://example.org/ns#slice3, http://purl.org/linked-data/cube#observation, http://example.org/ns#o32] [http://example.org/ns#slice3, http://purl.org/linked-data/cube#observation, http://example.org/ns#o31] [http://example.org/ns#slice3, http://purl.org/linked-data/sdmx/2009/dimension#sex, http://purl.org/linked-data/sdmx/2009/code#sex-M] [http://example.org/ns#slice3, http://example.org/ns#refPeriod, http://reference.data.gov.uk/id/gregorian-interval/2005-01-01T00:00:00/P3Y] [http://example.org/ns#slice3, http://purl.org/linked-data/cube#sliceStructure, http://example.org/ns#sliceByRegion] [http://example.org/ns#slice3, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Slice] [http://example.org/ns#o51, http://example.org/ns#lifeExpectancy, \"77.0\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o51, http://example.org/ns#refArea, http://example.org/geo#newport_00pr] [http://example.org/ns#o51, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o51, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o23, http://example.org/ns#lifeExpectancy, \"81.3\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o23, http://example.org/ns#refArea, http://example.org/geo#monmouthshire_00pp] [http://example.org/ns#o23, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o23, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o64, http://example.org/ns#lifeExpectancy, \"79.6\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o64, http://example.org/ns#refArea, http://example.org/geo#merthyr_tdfil_00ph] [http://example.org/ns#o64, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o64, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#sliceByRegion, http://purl.org/linked-data/cube#componentProperty, http://purl.org/linked-data/sdmx/2009/dimension#sex] [http://example.org/ns#sliceByRegion, http://purl.org/linked-data/cube#componentProperty, http://example.org/ns#refPeriod] [http://example.org/ns#sliceByRegion, http://www.w3.org/2000/01/rdf-schema#comment, \"Slice by grouping regions together, fixing sex and time values\"@en] [http://example.org/ns#sliceByRegion, http://www.w3.org/2000/01/rdf-schema#label, \"slice by region\"@en] [http://example.org/ns#sliceByRegion, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#SliceKey] [http://example.org/ns#o43, http://example.org/ns#lifeExpectancy, \"81.5\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o43, http://example.org/ns#refArea, http://example.org/geo#monmouthshire_00pp] [http://example.org/ns#o43, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o43, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#refPeriod, http://purl.org/linked-data/cube#concept, http://purl.org/linked-data/sdmx/2009/concept#refPeriod] [http://example.org/ns#refPeriod, http://www.w3.org/2000/01/rdf-schema#range, http://reference.data.gov.uk/def/intervals/Interval] [http://example.org/ns#refPeriod, http://www.w3.org/2000/01/rdf-schema#subPropertyOf, http://purl.org/linked-data/sdmx/2009/dimension#refPeriod] [http://example.org/ns#refPeriod, http://www.w3.org/2000/01/rdf-schema#label, \"reference period\"@en] [http://example.org/ns#refPeriod, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#DimensionProperty] [http://example.org/ns#refPeriod, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://www.w3.org/1999/02/22-rdf-syntax-ns#Property] [http://example.org/ns#slice2, http://purl.org/linked-data/cube#observation, http://example.org/ns#o24] [http://example.org/ns#slice2, http://purl.org/linked-data/cube#observation, http://example.org/ns#o23] [http://example.org/ns#slice2, http://purl.org/linked-data/cube#observation, http://example.org/ns#o22] [http://example.org/ns#slice2, http://purl.org/linked-data/cube#observation, http://example.org/ns#o21] [http://example.org/ns#slice2, http://purl.org/linked-data/sdmx/2009/dimension#sex, http://purl.org/linked-data/sdmx/2009/code#sex-F] [http://example.org/ns#slice2, http://example.org/ns#refPeriod, http://reference.data.gov.uk/id/gregorian-interval/2004-01-01T00:00:00/P3Y] [http://example.org/ns#slice2, http://purl.org/linked-data/cube#sliceStructure, http://example.org/ns#sliceByRegion] [http://example.org/ns#slice2, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Slice] [http://example.org/ns#refArea, http://purl.org/linked-data/cube#concept, http://purl.org/linked-data/sdmx/2009/concept#refArea] [http://example.org/ns#refArea, http://www.w3.org/2000/01/rdf-schema#range, http://data.ordnancesurvey.co.uk/ontology/admingeo/UnitaryAuthority] [http://example.org/ns#refArea, http://www.w3.org/2000/01/rdf-schema#subPropertyOf, http://purl.org/linked-data/sdmx/2009/dimension#refArea] [http://example.org/ns#refArea, http://www.w3.org/2000/01/rdf-schema#label, \"reference area\"@en] [http://example.org/ns#refArea, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#DimensionProperty] [http://example.org/ns#refArea, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://www.w3.org/1999/02/22-rdf-syntax-ns#Property] [http://example.org/ns#o22, http://example.org/ns#lifeExpectancy, \"83.3\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o22, http://example.org/ns#refArea, http://example.org/geo#cardiff_00pt] [http://example.org/ns#o22, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o22, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o63, http://example.org/ns#lifeExpectancy, \"81.7\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o63, http://example.org/ns#refArea, http://example.org/geo#monmouthshire_00pp] [http://example.org/ns#o63, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o63, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o42, http://example.org/ns#lifeExpectancy, \"83.7\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o42, http://example.org/ns#refArea, http://example.org/geo#cardiff_00pt] [http://example.org/ns#o42, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o42, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o14, http://example.org/ns#lifeExpectancy, \"75.5\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o14, http://example.org/ns#refArea, http://example.org/geo#merthyr_tdfil_00ph] [http://example.org/ns#o14, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o14, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#dsd-le3, http://purl.org/linked-data/cube#sliceKey, http://example.org/ns#sliceByRegion] [http://example.org/ns#dsd-le3, http://purl.org/linked-data/cube#component, d961e60be1970cc7ddca42992e970eee] [http://example.org/ns#dsd-le3, http://purl.org/linked-data/cube#component, 6df363eeaf4638d05e3d665d736eb72d] [http://example.org/ns#dsd-le3, http://purl.org/linked-data/cube#component, 6188285dc5873de240df8afa9b261f0d] [http://example.org/ns#dsd-le3, http://purl.org/linked-data/cube#component, 3f040c3f8b5c76aadb162800dbda96ac] [http://example.org/ns#dsd-le3, http://purl.org/linked-data/cube#component, 256caf10fb5fb960688d18c53fbcb8de] [http://example.org/ns#dsd-le3, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#DataStructureDefinition] [http://example.org/ns#slice1, http://purl.org/linked-data/cube#observation, http://example.org/ns#o14] [http://example.org/ns#slice1, http://purl.org/linked-data/cube#observation, http://example.org/ns#o13] [http://example.org/ns#slice1, http://purl.org/linked-data/cube#observation, http://example.org/ns#o12] [http://example.org/ns#slice1, http://purl.org/linked-data/cube#observation, http://example.org/ns#o11] [http://example.org/ns#slice1, http://purl.org/linked-data/sdmx/2009/dimension#sex, http://purl.org/linked-data/sdmx/2009/code#sex-M] [http://example.org/ns#slice1, http://example.org/ns#refPeriod, http://reference.data.gov.uk/id/gregorian-interval/2004-01-01T00:00:00/P3Y] [http://example.org/ns#slice1, http://purl.org/linked-data/cube#sliceStructure, http://example.org/ns#sliceByRegion] [http://example.org/ns#slice1, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Slice] [http://example.org/ns#o21, http://example.org/ns#lifeExpectancy, \"80.7\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o21, http://example.org/ns#refArea, http://example.org/geo#newport_00pr] [http://example.org/ns#o21, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o21, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o62, http://example.org/ns#lifeExpectancy, \"83.4\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o62, http://example.org/ns#refArea, http://example.org/geo#cardiff_00pt] [http://example.org/ns#o62, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o62, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o34, http://example.org/ns#lifeExpectancy, \"75.5\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o34, http://example.org/ns#refArea, http://example.org/geo#merthyr_tdfil_00ph] [http://example.org/ns#o34, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o34, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [3f040c3f8b5c76aadb162800dbda96ac, http://purl.org/linked-data/cube#componentAttachment, http://purl.org/linked-data/cube#Slice] [3f040c3f8b5c76aadb162800dbda96ac, http://purl.org/linked-data/cube#order, \"2\"^^http://www.w3.org/2001/XMLSchema#integer] [3f040c3f8b5c76aadb162800dbda96ac, http://purl.org/linked-data/cube#dimension, http://example.org/ns#refPeriod] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/issued, \"2010-08-11\"^^http://www.w3.org/2001/XMLSchema#date] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#slice, http://example.org/ns#slice1] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/description, \"Life expectancy within Welsh Unitary authorities - extracted from Stats Wales\"@en] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/subject, http://example.org/geo#wales] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#slice, http://example.org/ns#slice6] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#slice, http://example.org/ns#slice4] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/sdmx/2009/attribute#unitMeasure, http://dbpedia.org/resource/Year] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#structure, http://example.org/ns#dsd-le3] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#slice, http://example.org/ns#slice5] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#slice, http://example.org/ns#slice2] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/subject, http://purl.org/linked-data/sdmx/2009/subject#1.4] [http://example.org/ns#dataset-le3, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#DataSet] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/title, \"Life expectancy\"@en] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/subject, http://purl.org/linked-data/sdmx/2009/subject#3.2] [http://example.org/ns#dataset-le3, http://purl.org/linked-data/cube#slice, http://example.org/ns#slice3] [http://example.org/ns#dataset-le3, http://www.w3.org/2000/01/rdf-schema#comment, \"Life expectancy within Welsh Unitary authorities - extracted from Stats Wales\"@en] [http://example.org/ns#dataset-le3, http://purl.org/dc/terms/publisher, http://example.org/ns#organization] [http://example.org/ns#slice6, http://purl.org/linked-data/cube#observation, http://example.org/ns#o64] [http://example.org/ns#slice6, http://purl.org/linked-data/cube#observation, http://example.org/ns#o63] [http://example.org/ns#slice6, http://purl.org/linked-data/cube#observation, http://example.org/ns#o62] [http://example.org/ns#slice6, http://purl.org/linked-data/cube#observation, http://example.org/ns#o61] [http://example.org/ns#slice6, http://purl.org/linked-data/sdmx/2009/dimension#sex, http://purl.org/linked-data/sdmx/2009/code#sex-F] [http://example.org/ns#slice6, http://example.org/ns#refPeriod, http://reference.data.gov.uk/id/gregorian-interval/2006-01-01T00:00:00/P3Y] [http://example.org/ns#slice6, http://purl.org/linked-data/cube#sliceStructure, http://example.org/ns#sliceByRegion] [http://example.org/ns#slice6, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Slice] [http://example.org/ns#lifeExpectancy, http://www.w3.org/2000/01/rdf-schema#range, http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#lifeExpectancy, http://www.w3.org/2000/01/rdf-schema#subPropertyOf, http://purl.org/linked-data/sdmx/2009/measure#obsValue] [http://example.org/ns#lifeExpectancy, http://www.w3.org/2000/01/rdf-schema#label, \"life expectancy\"@en] [http://example.org/ns#lifeExpectancy, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#MeasureProperty] [http://example.org/ns#lifeExpectancy, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://www.w3.org/1999/02/22-rdf-syntax-ns#Property] [http://example.org/ns#o41, http://example.org/ns#lifeExpectancy, \"80.9\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o41, http://example.org/ns#refArea, http://example.org/geo#newport_00pr] [http://example.org/ns#o41, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o41, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o13, http://example.org/ns#lifeExpectancy, \"76.6\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o13, http://example.org/ns#refArea, http://example.org/geo#monmouthshire_00pp] [http://example.org/ns#o13, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o13, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o54, http://example.org/ns#lifeExpectancy, \"74.9\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o54, http://example.org/ns#refArea, http://example.org/geo#merthyr_tdfil_00ph] [http://example.org/ns#o54, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o54, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [6df363eeaf4638d05e3d665d736eb72d, http://purl.org/linked-data/cube#measure, http://example.org/ns#lifeExpectancy] [http://example.org/ns#o61, http://example.org/ns#lifeExpectancy, \"81.5\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o61, http://example.org/ns#refArea, http://example.org/geo#newport_00pr] [http://example.org/ns#o61, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o61, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o33, http://example.org/ns#lifeExpectancy, \"76.5\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o33, http://example.org/ns#refArea, http://example.org/geo#monmouthshire_00pp] [http://example.org/ns#o33, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o33, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#slice5, http://purl.org/linked-data/cube#observation, http://example.org/ns#o54] [http://example.org/ns#slice5, http://purl.org/linked-data/cube#observation, http://example.org/ns#o53] [http://example.org/ns#slice5, http://purl.org/linked-data/cube#observation, http://example.org/ns#o52] [http://example.org/ns#slice5, http://purl.org/linked-data/cube#observation, http://example.org/ns#o51] [http://example.org/ns#slice5, http://purl.org/linked-data/sdmx/2009/dimension#sex, http://purl.org/linked-data/sdmx/2009/code#sex-M] [http://example.org/ns#slice5, http://example.org/ns#refPeriod, http://reference.data.gov.uk/id/gregorian-interval/2006-01-01T00:00:00/P3Y] [http://example.org/ns#slice5, http://purl.org/linked-data/cube#sliceStructure, http://example.org/ns#sliceByRegion] [http://example.org/ns#slice5, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Slice] [6188285dc5873de240df8afa9b261f0d, http://purl.org/linked-data/cube#componentAttachment, http://purl.org/linked-data/cube#Slice] [6188285dc5873de240df8afa9b261f0d, http://purl.org/linked-data/cube#order, \"3\"^^http://www.w3.org/2001/XMLSchema#integer] [6188285dc5873de240df8afa9b261f0d, http://purl.org/linked-data/cube#dimension, http://purl.org/linked-data/sdmx/2009/dimension#sex] [http://example.org/ns#o12, http://example.org/ns#lifeExpectancy, \"78.7\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o12, http://example.org/ns#refArea, http://example.org/geo#cardiff_00pt] [http://example.org/ns#o12, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o12, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o53, http://example.org/ns#lifeExpectancy, \"76.6\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o53, http://example.org/ns#refArea, http://example.org/geo#monmouthshire_00pp] [http://example.org/ns#o53, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o53, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o32, http://example.org/ns#lifeExpectancy, \"78.6\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o32, http://example.org/ns#refArea, http://example.org/geo#cardiff_00pt] [http://example.org/ns#o32, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o32, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#slice4, http://purl.org/linked-data/cube#observation, http://example.org/ns#o44] [http://example.org/ns#slice4, http://purl.org/linked-data/cube#observation, http://example.org/ns#o43] [http://example.org/ns#slice4, http://purl.org/linked-data/cube#observation, http://example.org/ns#o42] [http://example.org/ns#slice4, http://purl.org/linked-data/cube#observation, http://example.org/ns#o41] [http://example.org/ns#slice4, http://purl.org/linked-data/sdmx/2009/dimension#sex, http://purl.org/linked-data/sdmx/2009/code#sex-F] [http://example.org/ns#slice4, http://example.org/ns#refPeriod, http://reference.data.gov.uk/id/gregorian-interval/2005-01-01T00:00:00/P3Y] [http://example.org/ns#slice4, http://purl.org/linked-data/cube#sliceStructure, http://example.org/ns#sliceByRegion] [http://example.org/ns#slice4, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Slice] [http://example.org/ns#o11, http://example.org/ns#lifeExpectancy, \"76.7\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o11, http://example.org/ns#refArea, http://example.org/geo#newport_00pr] [http://example.org/ns#o11, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o11, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o52, http://example.org/ns#lifeExpectancy, \"78.7\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o52, http://example.org/ns#refArea, http://example.org/geo#cardiff_00pt] [http://example.org/ns#o52, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o52, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation] [http://example.org/ns#o24, http://example.org/ns#lifeExpectancy, \"79.1\"^^http://www.w3.org/2001/XMLSchema#decimal] [http://example.org/ns#o24, http://example.org/ns#refArea, http://example.org/geo#merthyr_tdfil_00ph] [http://example.org/ns#o24, http://purl.org/linked-data/cube#dataSet, http://example.org/ns#dataset-le3] [http://example.org/ns#o24, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://purl.org/linked-data/cube#Observation]>}"
```

```r
SPARQLscript<- '
select * where {
 <http://example.org/ns#o62> ?p ?o .
}    
'

results <- sparql.rdf(store, SPARQLscript )
knitr::kable(results)
```



|p                                               |o                                            |
|:-----------------------------------------------|:--------------------------------------------|
|http://example.org/ns#lifeExpectancy            |83.4                                         |
|http://example.org/ns#refArea                   |http://example.org/geo#cardiff_00pt          |
|http://purl.org/linked-data/cube#dataSet        |http://example.org/ns#dataset-le3            |
|http://www.w3.org/1999/02/22-rdf-syntax-ns#type |http://purl.org/linked-data/cube#Observation |

```r
SPARQLscript<- '
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  
prefix skos: <http://www.w3.org/2004/02/skos/core#>  
prefix prov: <http://www.w3.org/ns/prov#>  
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>  
prefix dcat: <http://www.w3.org/ns/dcat#>  
prefix owl: <http://www.w3.org/2002/07/owl#>  
prefix xsd: <http://www.w3.org/2001/XMLSchema#>  
prefix qb: <http://purl.org/linked-data/cube#>  
prefix pav: <http://purl.org/pav>  
prefix dct: <http://purl.org/dc/terms/>  
 select * where {
?s a qb:Observation  ;
?p ?o .
values (?s) {
( <http://example.org/ns#o62> )
}
 }    
'
results <- sparql.rdf(store, SPARQLscript )
```

# Effect of using the ontology inference

See (https://jena.apache.org/documentation/ontology/#ontology-inference-overview).


```r
exfile <- file.path(system.file("extdata/sample-rdf", "example.ttl", package="rrdfqb") )
store.ontology <- load.rdf( exfile, format="TURTLE")

results.ontology <- sparql.rdf(store.ontology, SPARQLscript )
knitr::kable(results.ontology)
```



|s                         |p                                                       |o                                   |
|:-------------------------|:-------------------------------------------------------|:-----------------------------------|
|http://example.org/ns#o62 |http://example.org/ns#lifeExpectancy                    |83.4                                |
|http://example.org/ns#o62 |http://example.org/ns#refArea                           |http://example.org/geo#cardiff_00pt |
|http://example.org/ns#o62 |qb:dataSet                                              |http://example.org/ns#dataset-le3   |
|http://example.org/ns#o62 |rdf:type                                                |qb:Observation                      |
|http://example.org/ns#o62 |http://purl.org/linked-data/sdmx/2009/dimension#refArea |http://example.org/geo#cardiff_00pt |
|http://example.org/ns#o62 |http://purl.org/linked-data/sdmx/2009/measure#obsValue  |83.4                                |

The result shows inferred triples, added with respect to the query above.

# To do

TODO(mja): extend rrdf to handle SPARQL update
(https://jena.apache.org/documentation/query/update.html), so that the
RDF data cube normalization alogrihtms can be applied
(http://www.w3.org/TR/vocab-data-cube/#normalize-algorithm).
