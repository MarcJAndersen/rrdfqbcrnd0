---
title: "Using ARQ to make SPARQL queries"
author: "mja@statgroup.dk"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
---

# SPARQL scripts for the demographics cube (DC-DEMO-sample.TTL)

The examples below uses `arq` from Apache Jena (http://jena.apache.org). To install arq - download and unpack the latest version of apache-jena from (http://jena.apache.org/download/index.cgi). Put the executable `arq` in the path, or invoke `arq` with the full path to the directory with arq.

The use of arq is described many places, see for example (http://www.learningsparql.com/).

All `arq` commands below are to be run in the inst/extdata/sample-rdf
directory. The cd below in each code block is included because I could
not find a quick way to get the code chunk executed in that
directory. knitr is flexible enough to do it, I have not yet found the
right way to do it.  So, ignore the repeated cd ..

## Get dimensions
```{r, engine='bash'}
cd ../extdata/sample-rdf
arq --data DC-DEMO-sample.TTL --query DEMOdimensions.rq 
```

## Get attributes

```{r, engine='bash'}
cd ../extdata/sample-rdf
arq --data DC-DEMO-sample.TTL --query DEMOattributes.rq 
```

## Get observations

The SPARQL script shows for each observation the dimension, attributes and measures in a row.
Note: in the HTML version the output below can be scrolled using the left and right arrow.
```{r, engine='bash'}
cd ../extdata/sample-rdf
arq --data DC-DEMO-sample.TTL --query DEMOobservations.rq 
```


# How to compile this file into HTML

Start an R-session in the same directory as the file and issue:
```{r, eval=FALSE}
library(knitr)
knit2html("using-arq.Rmd")
```
Alternatively, use invoke R from the command line with parameters for executing knit2html.
